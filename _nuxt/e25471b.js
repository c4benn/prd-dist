(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{359:function(e,t,r){var content=r(458);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(31).default)("c08d4d80",content,!0,{sourceMap:!1})},457:function(e,t,r){"use strict";r(359)},458:function(e,t,r){var o=r(30)(!1);o.push([e.i,".form[data-sufm]{margin:2rem auto 4rem;position:relative;padding:0 var(--x-padding) 2.5rem;display:grid;max-width:612px}.sign-in-alt[data-sufm],.submit[data-sufm]{width:calc(100% - 3rem);display:flex;max-width:612px;margin:2.75rem auto}.submit[data-sufm] .loader{margin-right:1rem}.root[data-sufm] .root[data-tde]{padding:0 .5rem}.root[data-sufm] .content[data-tde]{font-size:1.15rem}.root[data-sufm] .heart-beat.delayed{-webkit-animation-delay:1.2s;animation-delay:1.2s}.root[data-sufm] .sign-up-password .input-hint{color:var(--hint-color)}",""]),e.exports=o},559:function(e,t,r){"use strict";r.r(t);r(12),r(10),r(11),r(13),r(9),r(14);var o=r(2),n=r(5),main=(r(20),r(22),r(37),r(72),r(0));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={events:["updateTemplate","submitting-form","account-created"],name:"SignUpForm",props:{nameValidator:{type:Function,required:!0},emailValidator:{type:Function,required:!0},passwordValidator:{type:Function,required:!0},creatingAccount:{type:Boolean,required:!0}},data:function(){return{formKey:"undefined",form:{name:"",username:"",email:"",password:"",showPassword:!1,agreed:!1},creatingAccountComponent:!1}},computed:{supabase:function(){return this.$store.getters.supabase}},methods:{resetSignUp:function(){this.form={name:"",username:"",email:"",password:"",showPassword:!1,agreed:!1},this.formKey=performance.now()}},render:function(e){var t,r,n=this,c={"data-sufm":""},div=function(t,r){return e("div",t,r)},input=function(t){return e("ui-input",t)};return div({attrs:l({},c),staticClass:"root"},[this.$slots.prepend,[this.$slots.socials,function(t,r){return e("ui-form",t,r)}({key:this.formKey,props:{name:"sign-up-form",submitData:{attrs:l({},c),props:{background:"info",flat:!0,disabled:this.creatingAccount||this.creatingAccountComponent},staticClass:"submit"},submitText:"Create Account"},attrs:l(l({},c),{},{action:".",autocomplete:"on"}),staticClass:"form fill-before",on:{"submit-form":function(){n.creatingAccountComponent=!0,n.$emit("submitting-form"),n.supabase.auth.user()&&n.supabase.auth.signOut(),n.supabase.auth.signUp({email:n.form.email,password:n.form.password}).then((function(e){n.creatingAccountComponent=!1,e.error||main.addUser.call(n,{email:n.form.email,name:n.form.name,user:(null==e?void 0:e.user)||{}}).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(201!=r.status){t.next=9;break}return n.$emit("account-created",n.form),n.$store.commit("UPDATE_",{name:"user",value:l(l({},n.$store.state.user),null==e?void 0:e.user)}),n.$emit("updateTemplate","account-created"),n.$store.commit("UPDATE_",{value:l(l({},n.$store.state.user),{},{awaitingSignIn:{email:n.form.email,password:n.form.password}}),name:"user"}),t.next=7,main.sleep.call(n,200);case 7:n.resetSignUp(),n.$nextTick((function(){n.$emit("reset-form")}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}}},[(this.creatingAccount||this.creatingAccountComponent)&&div({staticClass:"submit-button-wrapper",slot:"submitText"},[(t={props:{size:"1.5rem"},staticClass:"loader"},e("app-loader",t,r)),"Creating Account"]),[{label:"Name",validator:this.nameValidator,placeholder:"Egwu Sade"},{label:"Email",pattern:"^\\s*?[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*\\s*?$",type:"email",validator:this.emailValidator,placeholder:"example@domain",hint:"You will need to verify your email"},{label:"Password",autocomplete:"new-password",placeholder:"6+ characters",showPassword:this.form.showPassword,type:"password",validator:this.passwordValidator,hint:this.form.password&&!0===this.passwordValidator(this.form.password)?"Double check your password":void 0,attentionHint:!0,passwordToggle:{class:{"heart-beat delayed":!0===this.passwordValidator(this.form.password)}}}].map((function(e,t){var r=e.label.toLowerCase(),c={vmodel:function(e){n.form[r]=e,n.form.agreed=!1}};"password"==r&&(c["append-click"]=function(){n.form.showPassword=!n.form.showPassword});var d="Email"==e.label?function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,o,c,l,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.supabase.from("users").select("email");case 3:return r=e.sent,o=r.data,c=r.error,l={valid:null,message:null},o&&!c?(null==o||null===(d=o.find)||void 0===d?void 0:d.call(o,(function(e){var r,o;return(null===(r=(o=e.email).toLowerCase)||void 0===r?void 0:r.call(o))==t.toLowerCase()})))?(l.valid=!1,l.message="Account exists"):(l.valid=!0,l.message=""):(l.valid=!1,l.message="Error fetching"),e.abrupt("return",l);case 11:if(e.prev=11,e.t0=e.catch(0),console.log(e.t0),!e.t0){e.next=17;break}return m=/network request failed/i.test(e.t0.message),e.abrupt("return",{valid:!1,message:m||!n.$nuxt.isOnline?"Network error":"Error"});case 17:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}():void 0;return input({key:t,props:{type:e.type||"text",label:e.label,autocomplete:e.autocomplete||r,id:"sign-up-".concat(r),vmodel:n.form[r],validator:e.validator,pattern:e.pattern||".+",showPassword:e.showPassword,placeholder:e.placeholder,asyncValidator:d,hint:e.hint,attentionHint:e.attentionHint,passwordToggle:e.passwordToggle},on:l({},c)})})),input({props:{label:"Agree to terms and conditions",id:"delivery-agreed",type:"switch",vmodel:this.form.agreed,required:!0,validator:function(e){return!!e||"Required"},hint:"By signing up, you have agreed to our <span>terms and conditions</span>"},on:{vmodel:function(e){n.form.agreed=e}}}),div({slot:"append",attrs:l({},c),staticClass:"form-append"},[function(t,r){return e("text-divide",t,r)}(["Have an account?"]),function(t,r){return e("ui-btn",t,r)}({props:{text:!0,color:"primary",block:!0,tag:"div",filledText:!0,actionButton:!0},style:{opacity:this.creatingAccount?"var(--t-disabled)":void 0},attrs:l(l({},c),{},{title:"click to sign in"}),staticClass:"sign-in-alt",on:{click:function(){n.$emit("updateTemplate","sign-in")}}},["Sign in"])])])]])}},m=(r(457),r(7)),component=Object(m.a)(d,undefined,undefined,!1,null,null,null);t.default=component.exports}}]);