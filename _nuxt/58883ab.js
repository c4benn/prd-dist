(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{325:function(e,t,n){var content=n(388);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(31).default)("109605a0",content,!0,{sourceMap:!1})},387:function(e,t,n){"use strict";n(325)},388:function(e,t,n){var r=n(30)(!1);r.push([e.i,".bag-page-dialog-root:not(.account-created){--background-elem-background:var(--theme-surface)!important}.bag-page-dialog-root.append-active .bag-page-dialog[data-bpdg]{box-shadow:var(--raise-light)!important}.bag-page-dialog[data-bpdg]{height:var(--full-dialog);--x-padding:1.15rem;transform-origin:top;transform:var(--transform-value);overflow:hidden!important;transition:transform .5s}.bag-page-dialog[data-bpdg].will-change{will-change:transform}.root[data-bpdg]{height:100%;position:relative;transition:background-color 1ms .2s}.header[data-bpdg]{z-index:1;overflow-y:hidden}.header[data-bpdg]:before{border-bottom:var(--ui-divide);transition:opacity .2s}.header[data-bpdg]:after{visibility:hidden}.header[data-bpdg].__hide-before:before{opacity:0}.heading[data-bpdg]{transition:opacity .25s linear}.heading[data-bpdg].delivery-info{transition:transform .2s ease,opacity .2s ease}.heading[data-bpdg].__hidden{transition:transform 1ms .3s,opacity .2s ease;pointer-events:none;opacity:0;transform:translate3d(0,4px,0)}.back[data-bpdg]{position:absolute;left:var(--x-padding)}@media (hover:hover) and (pointer:fine){.close[data-bpdg]:not(.__disabled):not(:hover):not(:focus):before{opacity:.05}}.close[data-bpdg]:not(.__disabled):not(:active):before{opacity:.05}.main[data-bpdg]{min-height:calc(100% - var(--sheet-header-height));max-height:calc(100% - var(--sheet-header-height));overflow-x:hidden;overflow-y:auto;overflow:hidden auto;position:relative;transition:opacity .25s linear;background-color:var(--theme-surface)}.main[data-bpdg].account-created{background-color:var(--theme-primary)}.dark-theme .main[data-bpdg].account-created{background-color:var(--theme-surface)}.root.__completed[data-bpdg] .main[data-bpdg]{overflow:hidden}.banner-action[data-bpdg]{text-decoration:underline;padding:0 .5rem!important;word-spacing:0!important;letter-spacing:.5px}.alert[data-bpdg]{margin-top:1rem;padding:1rem 1rem 1rem .75rem;position:relative;isolation:isolate;--alert-color:transparent;background:var(--theme-banner)!important;box-shadow:var(--raise-normal);line-height:1.35;background-color:inherit;display:grid;grid-row-gap:.5rem;row-gap:.5rem;width:calc(100% - 2rem);font-size:.95rem!important}.alert[data-bpdg] .ui-btn{--padding__text-sm:0 10px;color:inherit;font-size:.925rem;font-weight:600}.alert[data-bpdg]{left:50%;transform:translateX(-50%);max-width:650px;padding-left:1.25rem}.alert[data-bpdg]:after{--t-disabled:0.15;border:1px solid var(--alert-color);opacity:var(--t-disabled)}.alert[data-bpdg]>p:first-of-type{opacity:var(--t-subtitle)}.alert-action-wrapper[data-bpdg]{display:grid;justify-content:flex-end;align-items:center;-moz-column-gap:.25rem;grid-column-gap:.25rem;column-gap:.25rem;grid-template-columns:auto auto;margin-top:.35rem}.alert[data-bpdg]>p{opacity:var(--t-body);z-index:1}.alert[data-bpdg]:before{background-color:var(--alert-color);opacity:.25}.completed[data-bpdg]{width:100%;height:calc(100% - var(--sheet-header-height));position:absolute;top:var(--sheet-header-height);left:0;background-color:var(--theme-primary);display:grid;align-content:center;transition:opacity .2s;opacity:0;pointer-events:none}.completed[data-bpdg].show{opacity:1;pointer-events:auto}.completed-wrapper[data-bpdg]{display:grid;grid-template-rows:112px auto;grid-row-gap:3rem;row-gap:3rem;margin-top:calc(var(--sheet-header-height) - var(--sheet-header-height)*2)}.checked[data-bpdg]{display:flex;justify-content:center;color:var(--success)}.checked[data-bpdg] svg{height:100%;width:100%}.completed-desc[data-bpdg]{text-align:center;font-size:1.5rem}",""]),e.exports=r},523:function(e,t,n){"use strict";n.r(t);n(12),n(10),n(11),n(13),n(9),n(14);var r=n(5),o=n(2),main=(n(19),n(26),n(71),n(37),n(20),n(0));function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={name:"BagPageDialog",data:function(){return{newUser:null,signUpFromKey:"undefined",creatingAccount:!1,signinIn:!1,form:{anonymousDelivery:{name:"",phone:"",email:"",country:"Nigeria",state:"Lagos",city:"",address:"",save:!1,isCorrect:!1},signIn:{name:"",password:"",showPassword:!1,remember:!1},signUp:{name:"",username:"",email:"",password:"",showPassword:!1,agreed:!1}},showAppendDialog:!1,selectDialogTemplate:{label:"",selected:""},addWillChange:!1,anonymousOrderCompleted:!1,initialTemplate:"",appendIntersection:{entries:{}},appendTransitionState:"",transformTransition:void 0,transformValue:void 0,toAndFromTransformValues:{to:{scaleX:.95,scaleY:.975,translateY:-1},from:{scaleX:1,scaleY:1,translateY:0}},showHeaderText:null}},computed:{signedIn:function(){return/signed-in/i.test(this.dialogObject.template)},accountCreated:function(){return/account-created/i.test(this.dialogObject.template)},dialogObject:function(){return this.$store.state.vmodel.dialogs.bagPage},fetchedStates:function(){return this.$store.state.bagPageFetchedStates},supabase:function(){return this.$store.getters.supabase},user:function(){return this.$store.state.user},showBanner:function(){return!!/^anonymous|^sign-/i.test(this.dialogObject.template)&&!this.supabase.auth.user()},deliveryInfoTemplate:function(){return/^delivery-info$/i.test(this.dialogObject.template)}},watch:{$route:function(e,t){var n=this;if("/bag"==e.path){var r;if(null===(r=e.query)||void 0===r||!r.dialog)return this.$nextTick((function(){n.$store.commit("V_MODEL",{value:{template:n.dialogObject.template,active:!1},path:"bagPage",innerPath:"dialogs"})}));this.triggerRouteQuery({f:t,t:e})}},showAppendDialog:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.addWillChange=!0,requestAnimationFrame((function(){e.transformValue=e.showAppendDialog?"translate3d(0, -0.5rem, 0) scale3d(0.9825,0.9825,1)":"translate3d(0, 0, 0) scale3d(1, 1, 1)"})),t.next=4,main.sleep.call(e,516);case 4:e.addWillChange=!1,requestAnimationFrame((function(){e.showAppendDialog||(e.transformValue=void 0)}));case 6:case"end":return t.stop()}}),t)})))()},"form.state":function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,main.sleep.call(e,516);case 2:e.form.anonymousDelivery.city="";case 3:case"end":return t.stop()}}),t)})))()},appendIntersection:function(){if(/afterE/i.test(this.appendTransitionState)){var e,t=null===(e=this.appendIntersection.entries)||void 0===e?void 0:e.intersectionRatio;isNaN(t)&&(t=1);var n=this.toAndFromTransformValues.to.translateY*t;this.addWillChange=n!=this.toAndFromTransformValues.to.translateY,this.transformValue="translate3d(0, ".concat(n,"rem, 0)")}},appendTransitionState:function(){/afterE/i.test(this.appendTransitionState)?this.transformTransition="0ms":this.transformTransition=void 0},dialogObject:function(e,t){var n=this;this.$nextTick((function(){if(e.active!=t.active){n.showHeaderText=!n.deliveryInfoTemplate;var r=JSON.stringify(n.$route.query),o=JSON.stringify({dialog:e.active?n.dialogObject.template:void 0,append:e.active?n.$route.query.append:void 0,banner:e.active?n.$route.query.banner:void 0});r!=o&&n.$router.push({query:JSON.parse(o)})}}))}},mounted:function(){var e,t,n,r,d,l,c=this;this.showHeaderText=!this.deliveryInfoTemplate;var m=/^delivery-info$|^anonymous-order$|^sign-in$|^sign-up$|^account-created$|^signed-in$/i.test(null===(e=this.$route)||void 0===e||null===(t=e.query)||void 0===t?void 0:t.dialog);("account-created"==(null===(n=this.$route)||void 0===n||null===(r=n.query)||void 0===r?void 0:r.dialog)&&!this.newUser||"signed-in"==(null===(d=this.$route)||void 0===d||null===(l=d.query)||void 0===l?void 0:l.dialog)&&!this.supabase.auth.user())&&(m=!1,this.$router.push({query:{}})),m&&this.$nextTick(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,main.sleep.call(c,300,!0);case 2:c.triggerRouteQuery("mounted");case 3:case"end":return e.stop()}}),e)}))))},methods:{triggerRouteQuery:function(e){var t=this,n=this.$route.query,r=/^delivery-info$|^anonymous-order$|^sign-in$|^sign-up$|^account-created$|^signed-in$/i.test(null==n?void 0:n.dialog),d=/^sign-in$/i.test(null==n?void 0:n.dialog)&&/^forgot-password$/i.test(null==n?void 0:n.append)||/^delivery-info$|^anonymous-order$/i.test(null==n?void 0:n.dialog)&&/^choose-state|choose-city$/i.test(null==n?void 0:n.append);if(d&&/^choose-state|choose-city$/i.test(null==n?void 0:n.append)){var l=null===this.fetchedStates||"Error fetching"==this.fetchedStates;(d=!l)||this.updateTemplate({append:void 0})}this.$nextTick((function(){t.$store.commit("V_MODEL",{value:{template:(null==n?void 0:n.dialog)||t.dialogObject.template,active:r},path:"bagPage",innerPath:"dialogs"}),t.$nextTick(Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,main.sleep.call(t,"mounted"==e?800:0,"mounted"==e);case 2:requestAnimationFrame((function(){return t.showAppendDialog=d}));case 3:case"end":return n.stop()}}),n)}))))}))},updateTemplate:function(e){var t=this,n=e.template,template=void 0===n?this.dialogObject.template:n,r=e.append,o=e.callback,d=e.banner,l=void 0===d?this.$route.query.banner:d;requestAnimationFrame((function(){t.$router.push({query:{dialog:template,append:r,banner:l}}),o&&o()}))},resetSignUp:function(){this.form.signUp={name:"",username:"",email:"",password:"",showPassword:!1,agreed:!1},this.signUpFromKey=Date.now(),this.creatingAccount=!1},resetSignIn:function(){this.form.signIn={name:"",password:"",showPassword:!1,remember:!1}},resetAnonymousForm:function(){this.form.anonymousDelivery={name:"",phone:"",email:"",country:"Nigeria",state:"Lagos",city:"",address:"",save:!1,isCorrect:!1}}},render:function(e){var t,n,r=this,d={"data-bpdg":""},div=function(t,n){return e("div",t,n)},p=function(t,n){return e("p",t,n)},c=function(t,n){return e("ui-transition",t,n)},m=this.dialogObject,f={transition:this.accountCreated||this.signedIn?{enter:"slide-y(-2rem)",leave:"slide-y(2rem)"}:{enter:"slide-x(2rem)",leave:"slide-x(-2rem)"},ease:"ease"},h=function(e){var t=null==e?void 0:e.trim();return t.length?!(t.length<6)||"Min length is 6":"Required"},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==e?void 0:e.trim();return n.length?!(n.length<t)||"Min length is ".concat(t):"Required"},y=function(t){return[div({slot:"prepend"},[!r.user.session&&div({attrs:l({},d),staticClass:"alert fill-before-after rounded"},[p("Anonymous orders can only be shipped to residents in Lagos."),div({attrs:l({},d),staticClass:"alert-action-wrapper"},[{title:"Sign in"},{title:"Create account"}].map((function(t,n){return r={key:n,props:{size:"sm",text:!0}},o=t.title,e("ui-btn",r,o);var r,o})))])]),(n={props:{nameValidator:v,passwordValidator:h,emailValidator:main.emailValidator,payload:t,showAppendDialog:r.showAppendDialog,selectDialogTemplate:r.selectDialogTemplate,selectValue:r.form.anonymousDelivery.city,disableTitleIntersection:!r.deliveryInfoTemplate,template:r.deliveryInfoTemplate?"main":"anonymous-order"},on:{"title-intersecting":function(e){r.deliveryInfoTemplate&&(r.showHeaderText=!e)},"form-submitted":(m=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.anonymousOrderCompleted=!0,e.next=3,main.sleep.call(r,300);case 3:requestAnimationFrame(r.resetAnonymousForm);case 4:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)}),"toggle-select":function(e){r.selectDialogTemplate.label=e,r.selectDialogTemplate.selected=r.form[e.toLowerCase()],r.$nextTick((function(){return requestAnimationFrame((function(){r.updateTemplate({append:"choose-".concat(e.toLowerCase())})}))}))},"select-vmodel":function(e){r.form.anonymousDelivery[e.label]=e.value}}},e("delivery-form",n,c))];var n,c,m};return t={staticClass:"bag-page-dialog-root",class:["".concat(m.template),{"append-active":this.showAppendDialog,"append-entered":/afterE|beforeL|^le/i.test(this.appendTransitionState)}],props:{vmodel:this.dialogObject.active,contentAttrs:l({},d),contentClass:["bag-page-dialog ".concat(m.template),{"append-active":this.showAppendDialog,"will-change":this.addWillChange,"append-entered":/afterE|beforeL|^le/i.test(this.appendTransitionState)}],removePrepend:!1,contentStyle:{"--transform-value":this.transformValue},renderBackgroundElem:!this.showAppendDialog,useIntersection:!this.showAppendDialog},on:{vmodel:function(e){r.$nextTick((function(){return requestAnimationFrame((function(){var t;t=e,r.$store.commit("V_MODEL",{value:l(l({},m),{},{active:t}),path:"bagPage",innerPath:"dialogs"})}))}))},beforeEnter:function(){r.initialTemplate=m.template,r.previousTemplates=[],r.anonymousOrderCompleted=!1,r.creatingAccount=!1,r.signinIn=!1},afterLeave:function(){r.showAppendDialog=!1,r.form.anonymousDelivery.isCorrect=!1,r.anonymousOrderCompleted=!1,r.creatingAccount=!1,r.signinIn=!1}},scopedSlots:{default:function(t){return div({attrs:l({},d),staticClass:"root",class:[{__hidden:!/afterEnter|beforeL|^le/i.test(t.state),__completed:r.anonymousOrderCompleted,"theme-surface":/afterE/i.test(t.state)}]},[(n={attrs:{heading:r.signedIn?"":r.accountCreated?"Account created":/anonymous/i.test(m.template)?"Anonymous order":/sign-up/i.test(m.template)?"Sign up":/^delivery/i.test(m.template)?"Delivery info":"Sign in"},on:{"action-clicked":function(e){e.stopPropagation(),t.close()}}},e("sheetHeader",n,o)),c({props:l({},f),on:{enter:function(){r.deliveryInfoTemplate&&(r.showHeaderText=!1)},afterEnter:function(){r.deliveryInfoTemplate&&(r.showHeaderText=!1)}},scopedSlots:{default:function(){return div({key:m.template,ref:"main",attrs:l({},d),staticClass:"main ".concat(m.template)},/anonymous|^delivery-info/i.test(m.template)?y(t):/sign-up/i.test(m.template)?function(){return[(t={props:{nameValidator:v,passwordValidator:h,emailValidator:main.emailValidator,creatingAccount:r.creatingAccount},on:{updateTemplate:function(e){"account-created"==e?r.updateTemplate({template:"account-created"}):r.updateTemplate({template:"sign-in"})},"submitting-form":function(){r.creatingAccount=!0},"account-created":function(e){r.newUser=e}}},e("sign-up-form",t,n))];var t,n}():/sign-in/i.test(m.template)?function(){return[(t={props:{emailValidator:main.emailValidator,passwordValidator:h},on:{updateTemplate:function(e){r.updateTemplate({template:e}),r.signinIn=!1},"forgot-password":function(){r.$nextTick((function(){return requestAnimationFrame((function(){return r.updateTemplate({append:"forgot-password"})}))}))},"signing-in":function(){r.signinIn=!0}}},e("sign-in-form",t,n))];var t,n}():/^signed-in$|^account-created/i.test(m.template)?function(){return[(t={props:{signedIn:r.signedIn,accountCreated:r.accountCreated,newUser:r.newUser}},e("userFeedback",t,n))];var t,n}():null)}}}),div({attrs:l({},d),staticClass:"completed",class:[{show:r.anonymousOrderCompleted}],style:{transition:/afterEnter/i.test(t.state)?void 0:"0s"}},[div({attrs:l({},d),staticClass:"completed-wrapper"},[e("svg-checked",{attrs:l({},d),staticClass:"checked"}),p({attrs:l({},d),staticClass:"completed-desc"},"Delivery info updated")])])]);var n,o},append:function(t){return"sign-in"==m.template?(d={props:{vmodel:r.showAppendDialog},on:{vmodel:function(e){r.showAppendDialog=e,!e&&r.updateTemplate({append:void 0})},"intersection-point":function(e){r.appendIntersection=e},"transition-state":function(e){r.appendTransitionState=e}}},e("forgot-password",d,l)):function(t,n){return e("select-dialog",t,n)}({props:{dialogPayload:t,vmodel:r.showAppendDialog,label:r.selectDialogTemplate.label,selected:r.form.anonymousDelivery[r.selectDialogTemplate.label.toLowerCase()],activeState:"City"==r.selectDialogTemplate.label?r.form.anonymousDelivery.state:void 0},on:{vmodel:function(e){r.showAppendDialog=e,!e&&r.updateTemplate({append:void 0})},"item-selected":(n=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.form.anonymousDelivery[r.selectDialogTemplate.label.toLowerCase()]=t.value,e.next=3,main.sleep.call(r,500);case 3:r.form.anonymousDelivery.isCorrect=!1;case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),"transition-state":function(e){r.appendTransitionState=e}}});var n,d,l}}},e("ui-sheet",t,n)}},m=(n(387),n(7)),component=Object(m.a)(c,undefined,undefined,!1,null,null,null);t.default=component.exports}}]);